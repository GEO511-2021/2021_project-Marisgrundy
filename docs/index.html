<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Maris Grundy" />


<title>Ecological Justice as Seen Through a Wetland Lens in Erie County</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Spatial Data Science Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Ecological Justice as Seen Through a Wetland Lens in Erie County</h1>
<h3 class="subtitle">Relationship between wetland proximity and median annual income in Erie County, NY</h3>
<h4 class="author">Maris Grundy</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The importance of intact ecosystems to human society can be understood through the lens of ecosystem services. Ecosystem services include direct and indirect resources and processes that support life on Earth (Wratten et al. 2013). Changes to ecosystems disrupt the ability to provide ecosystem services (Carpernter et al. 2006). Urbanization is one of the largest drivers of ecosystem degradation due to land use change and habitat fragmentation from agriculture, housing, and infrastructure development (McCauley et al. 2013). The impacts of ecosystem loss from urbanization are not reflected equally within society. Instead, these losses reflect larger societal inequalities present in cities (Schell et al. 2020). Historical urban development practices rooted in structural racism and classism have led to current inequality of proximity green spaces in cities, with wealthier and whiter neighborhoods containing more trees, green space and biodiversity (Schell et al. 2020).</p>
<p>Buffalo, New York provides an example of an urban area that exhibits wealth inequality, with disproportionate negative impacts of environmental degradation being carried by lower income households (Krieg 2005). Buffalo is within Erie County, known for its location on the Great Lakes and surrounding freshwater watershed.</p>
<p>To see if wetland proximity follow the same pattern of connection with income disparity, this project will look at spatial distribution of intact wetlands in Erie County as it relates to median household income. I hypothesize that mean annual income will have an inverse relationship with geographic closeness to wetlands.</p>
</div>
<div id="materials-and-methods" class="section level1">
<h1>Materials and methods</h1>
<p>This project aims to uncover the relationship between median household income and proximity to wetlands in Erie County. To carry out this query, I used two data sources:</p>
<ol style="list-style-type: decimal">
<li><a href="https://data.census.gov/cedsci/">Census Data</a></li>
</ol>
<p>First I got a Census key, which allows me to download data from the census website onto r.</p>
<p>Next, I wrote code to gather data from the US Census website. Specifically, I was interested in getting the median household income in 2019 for homes at the tract level in Erie County, NY. I used data from the American Community Survey 1-year.</p>
<ol start="2" style="list-style-type: decimal">
<li><a href="https://www.fws.gov/wetlands/data/Mapper.html">National Wetlands Inventory</a></li>
</ol>
<p>For the wetland data I used the above link to search for the watersheds that cover Erie County. This search returned two watersheds: the Buffalo Eighteenmile watershed (HUC 04120103) and the Niagara watershed (HUC 04120104). These data were downloaded as shapefiles. To work with them, these shapefiles were merged, then converted to raster in r.</p>
<p>After getting both datasets into raster form and prepping the basemap, I made a raster sandwich! I created an overlay of median income data and wetland data. These datasets share geospatial information, so the overlay was possible.</p>
<p>Here’s the magical r code I created:</p>
<div id="load-packages" class="section level2">
<h2>Load Packages</h2>
<pre class="r"><code>library(spData)
library(sf)
library(units)
library(ggplot2)
library(viridis)
library(broom)
library(dplyr)
library(tidycensus)
library(choroplethr)
library(choroplethrMaps)
library(raster)
library(rasterVis)
library(tidyverse)
library(ggpmisc)
library(lwgeom)
knitr::opts_chunk$set(cache=TRUE)  </code></pre>
</div>
<div id="download-and-clean-all-required-data" class="section level2">
<h2>Download and clean all required data</h2>
<pre class="r"><code>#load population data
#first you need a Census key

#census_api_key(&quot;d7a2cd0f27c540f5b9cef151c8472838c33d797f&quot;, overwrite= TRUE, install= TRUE)

census_api_key(Sys.getenv(&quot;CENSUS_API_KEY&quot;))

#identify variables for consideration
v1 &lt;- load_variables(2019, &quot;acs1&quot;, cache=TRUE)
#View(v1)

# crop to domain (Erie County, tract level)
census_data&lt;- get_acs(geography=&quot;tract&quot;,
              variables= &quot;B07011_001&quot;,
              year=2019,
              state=&quot;NY&quot;,
              county = &quot;Erie&quot;,
              geometry= TRUE)


# define census region using a spatial bounding box and rasterize data
bbox&lt;-st_bbox(census_data)
domain &lt;- raster(resolution=0.008,crs=projection(census_data),
                 xmn=bbox$xmin,xmx=bbox$xmax,ymn=bbox$ymin,ymx=bbox$ymax)


#load watershed data and bind watersheds of interest into one raster
require(sf)
wetlands &lt;- bind_rows(
  read_sf(dsn = &quot;Data/HU8_04120103_Watershed_erie/HU8_04120103_Wetlands.shp&quot;),
  read_sf(dsn = &quot;Data/HU8_04120104_Watershed_niagara/HU8_04120104_Wetlands.shp&quot;)
)%&gt;%
  st_transform(projection(census_data))


wetlands_raster=rasterize(as(wetlands,&quot;Spatial&quot;),domain,field=1)
wetlands_distance=distance(wetlands_raster)</code></pre>
<p>Here is a figure showing Erie County broken into Census tracts</p>
<pre class="r"><code>ggplot(census_data)+
  geom_sf()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The following displays how wetlands are distributed in Erie County</p>
<pre class="r"><code>#Here are how the wetlands are distributed in Erie County
plot(wetlands_raster, main= &#39;Wetlands in Erie County&#39;, xlab=&#39;Longitude&#39;, ylab=&#39;Latitude&#39;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>plot(wetlands_distance, main=&#39;Proximity to wetlands in Erie County&#39;, xlab=&#39;Longitude&#39;, ylab=&#39;Latitude&#39;,asp=1)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
</div>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>##Here’s a histogram of the distribution of wetlands in Erie County by Distance This shows us how frequently a specific distance to any wetland occurs</p>
<pre class="r"><code>dist_wetland &lt;- hist(wetlands_distance, breaks=10, main=&#39;Distribution of Wetlands by Distance&#39;, xlab=&#39;Distance in Meters&#39;, col=&quot;chartreuse4&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>dist_wetland$counts</code></pre>
<pre><code>##  [1] 3415 1346  717  430  381  319  224  100   34    6</code></pre>
<p>Wetland raster deliniated by census tract</p>
<pre class="r"><code>#Now, breaking apart wetland vector by census tract
sf::sf_use_s2(FALSE)</code></pre>
<pre><code>## Spherical geometry (s2) switched off</code></pre>
<pre class="r"><code>wetlands_intersected&lt;-wetlands %&gt;% 
  st_intersection(census_data)%&gt;%
  group_by(GEOID)%&gt;%
  summarize(wetland_area=sum(st_area(geometry)),wetland_count=n())%&gt;%
  st_set_geometry(NULL)

#Select only GEOID, wetland_area, wetland_count
dplyr::select(wetlands_intersected, &quot;GEOID&quot;, &quot;wetland_area&quot;, &quot;wetland_count&quot;)</code></pre>
<pre><code>## # A tibble: 165 x 3
##    GEOID       wetland_area wetland_count
##    &lt;chr&gt;              [m^2]         &lt;int&gt;
##  1 36029000110     1270466.            36
##  2 36029000200       18516.             1
##  3 36029000500      706793.             2
##  4 36029000900       24646.             2
##  5 36029001000      124754.             6
##  6 36029001100      159181.             4
##  7 36029001900        3737.             2
##  8 36029003000       22687.             1
##  9 36029003301        3327.             1
## 10 36029003400        9668.             1
## # ... with 155 more rows</code></pre>
<pre class="r"><code>#left_join wetlands intersected with census data(L) by GEOID
major_table&lt;- left_join(census_data, wetlands_intersected)

#compare column titles I care about
plot1&lt;-ggplot(major_table, aes(estimate, as.numeric(wetland_area)))+
  geom_point(colour=&#39;green4&#39;)+
  geom_smooth()

plot1 + labs(&quot;Median Income vs Wetland Area&quot;,
  x=&quot;Median Income&quot;, y=&quot;Wetland Area&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>#mean distance with income
census_data$meandist&lt;- raster::extract(wetlands_distance, census_data, fun=mean)

plot2&lt;- ggplot(census_data, aes(fill= meandist))+
  geom_sf()
plot2</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<pre class="r"><code>#median distance with income
census_data$mediandist&lt;- raster::extract(wetlands_distance, census_data, fun=median)

plot3&lt;- ggplot(census_data, aes(fill= mediandist))+
  geom_sf()
plot3</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-3.png" width="672" /></p>
<p>Here’s where I could use some help!</p>
<pre class="r"><code>#The final figure I would like to create isn&#39;t working, but I am attempting to create
#a choropleth map filled with mean distance to wetland overlaid with a bubble map showing 
#estimated income in census tract.  If you have suggestions please help!  This is attempt
#one million.


census_data$meandist&lt;- raster::extract(wetlands_distance, census_data, fun=mean)
census_data_point &lt;- census_data %&gt;% st_centroid()

plot4&lt;- ggplot() +
  geom_sf(data = census_data, aes(fill = meandist)) +
  geom_sf(data = census_data_point, aes(size = estimate, color = estimate)) +
  scale_fill_continuous(type = &quot;viridis&quot;) +
#  scale_color_viridis(option=&quot;magma&quot;, trans=&quot;log&quot;,
   #                   name=&#39;Income ($)&#39;)  + 
  theme_void() + coord_sf()

plot4  
  
ggplot(data = census_data) +
  geom_sf(aes(fill = estimate))

library(tmap)
tmap_mode(&quot;view&quot;)

tm_shape(census_data) +
  tm_polygons(col = &quot;estimate&quot;)





mapview::mapview(census_data, zcol = &quot;estimate&quot;)

plot4</code></pre>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
<p>There is evidence of a relationship between mean income and proximity to a wetland within census tracts in Erie County. The choropleth/bubble map displaying wetland count and median income shows an inverse relationship between these variables.</p>
<p>As shown in the figure comparing median income with wetland area, wetland area increases with median income until approximately $58,000, after which it begins to decrease.</p>
<p>While these findings did not suggest a strong relationship between variables considered, they support the spatial discrepancy between impoverished communities in Erie County and proximity to wetlands. In the maps displaying wetland distribution and proximity to wetlands, close proximity excludes the downtown core in the City of Buffalo. People living in poverty within the city limits have a greater distance to travel to access a wetland. Persons living in poverty in the City of Buffalo include 30% of residents, which is higher than the national average of 11.4% (“U.S. Census Bureau QuickFacts” n.d.).</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>Carpenter, S. R., E. M. Bennett, and G. D. Peterson. 2006. Scenarios for Ecosystem Services: An Overview. Ecology and Society 11.</p>
<p>Krieg, E. J. 2005. Race and Environmental Justice in Buffalo, NY: A ZIP Code and Historical Analysis of Ecological Hazards. Society &amp; Natural Resources 18:199–213.</p>
<p>Schell, C. J., K. Dyson, T. L. Fuentes, S. Des Roches, N. C. Harris, D. S. Miller, C. A. Woelfle-Erskine, and M. R. Lambert. 2020. The ecological and evolutionary consequences of systemic racism in urban environments. Science 369:eaay4497.</p>
<p>U.S. Census Bureau QuickFacts: Buffalo city, New York. (n.d.). . <a href="https://www.census.gov/quickfacts/buffalocitynewyork" class="uri">https://www.census.gov/quickfacts/buffalocitynewyork</a>.</p>
<p>U.S. Census Bureau QuickFacts: United States. (n.d.). . <a href="https://www.census.gov/quickfacts/fact/table/US#" class="uri">https://www.census.gov/quickfacts/fact/table/US#</a>.</p>
<p>Wetlands Mapper. (n.d.). . <a href="https://www.fws.gov/wetlands/data/mapper.html" class="uri">https://www.fws.gov/wetlands/data/mapper.html</a>.</p>
<p>Wratten, S., H. Sandhu, R. Cullen, and R. Costanza, editors. 2013. Ecosystem Services in Agricultural and Urban Landscapes. First edition. Wiley.</p>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="https://wilsonlab.io/GEO511"><i> Spatial Data Science (GEO511) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
